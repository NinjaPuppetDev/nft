// SPDX-License-Identifier: MIT

pragma solidity ^0.8.18;

import {Test, console} from "../../lib/forge-std/src/Test.sol";
import {DeployCitiesNFT} from "../../script/DeployCitiesNft.s.sol";

contract DeployTestCitiesNFT is Test {
    DeployCitiesNFT public deployer;

    function setUp() public {
        deployer = new DeployCitiesNFT();
    }

    function testConvertSVGToUri() public view {
        string
            memory expectedURI = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDgwMCA2MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+IDxkZWZzPiA8bGluZWFyR3JhZGllbnQgaWQ9InNreUdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+IDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM4N0NFRUIiIC8+IDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0UwRjZGRiIgLz4gPC9saW5lYXJHcmFkaWVudD4gPHJhZGlhbEdyYWRpZW50IGlkPSJzdW5HbG93Ij4gPHN0b3Agb2Zmc2V0PSI3MCUiIHN0b3AtY29sb3I9IiNGRkQ3MDAiIC8+IDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0idHJhbnNwYXJlbnQiIC8+IDwvcmFkaWFsR3JhZGllbnQ+IDxmaWx0ZXIgaWQ9IndhdmVGaWx0ZXIiPiA8ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iMC4wMiAwLjA1IiBudW1PY3RhdmVzPSIzIiAvPiA8ZmVEaXNwbGFjZW1lbnRNYXAgaW49IlNvdXJjZUdyYXBoaWMiIHNjYWxlPSIzIiAvPiA8L2ZpbHRlcj4gPC9kZWZzPiA8IS0tIFNreSAtLT4gPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9InVybCgjc2t5R3JhZGllbnQpIiAvPiA8IS0tIFN1biAtLT4gPGNpcmNsZSBjeD0iNzAwIiBjeT0iMTAwIiByPSI1MCIgZmlsbD0idXJsKCNzdW5HbG93KSIgb3BhY2l0eT0iMC44Ij4gPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgdmFsdWVzPSI1MDs1NTs1MCIgZHVyPSI4cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+IDwvY2lyY2xlPiA8IS0tIE9jZWFuIC0tPiA8cGF0aCBkPSJNMCAzMDAgUTQwMCAzMjAgODAwIDMwMCBMODAwIDYwMCBMMCA2MDAgWiIgZmlsbD0iIzQ2ODJCNCIgZmlsdGVyPSJ1cmwoI3dhdmVGaWx0ZXIpIiAvPiA8IS0tIFNhbmQgLS0+IDxwYXRoIGQ9Ik0wIDQ1MCBRMjAwIDQzMCA0MDAgNDQwIFE2MDAgNDUwIDgwMCA0MzAgTDgwMCA2MDAgTDAgNjAwIFoiIGZpbGw9IiNGNEE0NjAiPiA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJkIiB2YWx1ZXM9IiBNMCA0NTAgUTIwMCA0MzAgNDAwIDQ0MCBRNjAwIDQ1MCA4MDAgNDMwIEw4MDAgNjAwIEwwIDYwMCBaOyBNMCA0NTAgUTIwMCA0NDAgNDAwIDQzNSBRNjAwIDQ0MCA4MDAgNDQwIEw4MDAgNjAwIEwwIDYwMCBaOyBNMCA0NTAgUTIwMCA0MzAgNDAwIDQ0MCBRNjAwIDQ1MCA4MDAgNDMwIEw4MDAgNjAwIEwwIDYwMCBaIiBkdXI9IjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gPC9wYXRoPiA8IS0tIFBhbG0gVHJlZSAtLT4gPHBhdGggZD0iTTEwMCA0NTAgQzEyMCAzMDAgMTQwIDI1MCAxNTAgMjAwIiBzdHJva2U9IiM4QjQ1MTMiIHN0cm9rZS13aWR0aD0iMTUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgLz4gPHBhdGggZD0iTTE1MCAyMDAgcS00MCAtNTAgLTIwIC0xMDAgcTYwIDAgMjAgMTAwIHEtNDAgLTUwIDAgLTEwMCBxNDAgNTAgMCAxMDAiIGZpbGw9IiMyMjhCMjIiIC8+IDwhLS0gQ2xvdWRzIC0tPiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDAgMTAwKSI+IDxjaXJjbGUgY3g9IjUwIiBjeT0iMzAiIHI9IjMwIiBmaWxsPSJ3aGl0ZSIgLz4gPGNpcmNsZSBjeD0iODAiIGN5PSIyMCIgcj0iMjUiIGZpbGw9IndoaXRlIiAvPiA8Y2lyY2xlIGN4PSIxMTAiIGN5PSIzMCIgcj0iMjgiIGZpbGw9IndoaXRlIiAvPiA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InRyYW5zbGF0ZSIgdmFsdWVzPSIyMDAgMTAwOyAyMjAgMTAwOyAyMDAgMTAwIiBkdXI9IjEycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+IDwvZz4gPCEtLSBXYXZlcyAtLT4gPGcgc3Ryb2tlPSJ3aGl0ZSIgb3BhY2l0eT0iMC42Ij4gPHBhdGggZD0iTTUwIDMyMCBRMTUwIDMwMCAyNTAgMzIwIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiPiA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJkIiB2YWx1ZXM9IiBNNTAgMzIwIFExNTAgMzAwIDI1MCAzMjA7IE01MCAzMjUgUTE1MCAzMDUgMjUwIDMyNTsgTTUwIDMyMCBRMTUwIDMwMCAyNTAgMzIwIiBkdXI9IjNzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gPC9wYXRoPiA8cGF0aCBkPSJNMzAwIDMxMCBRNDAwIDI5MCA1MDAgMzEwIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiPiA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJkIiB2YWx1ZXM9IiBNMzAwIDMxMCBRNDAwIDI5MCA1MDAgMzEwOyBNMzAwIDMxNSBRNDAwIDI5NSA1MDAgMzE1OyBNMzAwIDMxMCBRNDAwIDI5MCA1MDAgMzEwIiBkdXI9IjRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4gPC9wYXRoPiA8L2c+IDwhLS0gU2Vhc2hlbGxzIC0tPiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MDAgNTIwKSI+IDxwYXRoIGQ9Ik0wIDAgUTEwIC0yMCAyMCAwIFExMCAxMCAwIDAiIGZpbGw9IiNGRkI2QzEiIC8+IDxwYXRoIGQ9Ik0zMCA1IFE0MCAtMTUgNTAgNSBRNDAgMTUgMzAgNSIgZmlsbD0id2hpdGUiIC8+IDxwYXRoIGQ9Ik02MCAwIFE3MCAtMjAgODAgMCBRNzAgMTAgNjAgMCIgZmlsbD0iI0U2RTZGQSIgLz4gPC9nPiA8IS0tIFNhaWxib2F0IC0tPiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MDAgMzUwKSI+IDxwYXRoIGQ9Ik0wIDUwIEw1MCAwIEwwIC01MCBaIiBmaWxsPSIjRkY0NTAwIiAvPiA8cGF0aCBkPSJNMCA1MCBRLTMwIDQwIC01MCA2MCBMMCA1MCIgZmlsbD0iIzhCNDUxMyIgLz4gPGFuaW1hdGVNb3Rpb24gcGF0aD0iTTAgMCBRMTAwIC01MCAyMDAgMCBRMzAwIDUwIDQwMCAwIiBkdXI9IjIwcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+IDwvZz4gPC9zdmc+";
        string
            memory svg = '<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg"> <defs> <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%"> <stop offset="0%" stop-color="#87CEEB" /> <stop offset="100%" stop-color="#E0F6FF" /> </linearGradient> <radialGradient id="sunGlow"> <stop offset="70%" stop-color="#FFD700" /> <stop offset="100%" stop-color="transparent" /> </radialGradient> <filter id="waveFilter"> <feTurbulence type="fractalNoise" baseFrequency="0.02 0.05" numOctaves="3" /> <feDisplacementMap in="SourceGraphic" scale="3" /> </filter> </defs> <!-- Sky --> <rect width="800" height="600" fill="url(#skyGradient)" /> <!-- Sun --> <circle cx="700" cy="100" r="50" fill="url(#sunGlow)" opacity="0.8"> <animate attributeName="r" values="50;55;50" dur="8s" repeatCount="indefinite" /> </circle> <!-- Ocean --> <path d="M0 300 Q400 320 800 300 L800 600 L0 600 Z" fill="#4682B4" filter="url(#waveFilter)" /> <!-- Sand --> <path d="M0 450 Q200 430 400 440 Q600 450 800 430 L800 600 L0 600 Z" fill="#F4A460"> <animate attributeName="d" values=" M0 450 Q200 430 400 440 Q600 450 800 430 L800 600 L0 600 Z; M0 450 Q200 440 400 435 Q600 440 800 440 L800 600 L0 600 Z; M0 450 Q200 430 400 440 Q600 450 800 430 L800 600 L0 600 Z" dur="6s" repeatCount="indefinite" /> </path> <!-- Palm Tree --> <path d="M100 450 C120 300 140 250 150 200" stroke="#8B4513" stroke-width="15" stroke-linecap="round" /> <path d="M150 200 q-40 -50 -20 -100 q60 0 20 100 q-40 -50 0 -100 q40 50 0 100" fill="#228B22" /> <!-- Clouds --> <g transform="translate(200 100)"> <circle cx="50" cy="30" r="30" fill="white" /> <circle cx="80" cy="20" r="25" fill="white" /> <circle cx="110" cy="30" r="28" fill="white" /> <animateTransform attributeName="transform" type="translate" values="200 100; 220 100; 200 100" dur="12s" repeatCount="indefinite" /> </g> <!-- Waves --> <g stroke="white" opacity="0.6"> <path d="M50 320 Q150 300 250 320" stroke-width="2" fill="none"> <animate attributeName="d" values=" M50 320 Q150 300 250 320; M50 325 Q150 305 250 325; M50 320 Q150 300 250 320" dur="3s" repeatCount="indefinite" /> </path> <path d="M300 310 Q400 290 500 310" stroke-width="2" fill="none"> <animate attributeName="d" values=" M300 310 Q400 290 500 310; M300 315 Q400 295 500 315; M300 310 Q400 290 500 310" dur="4s" repeatCount="indefinite" /> </path> </g> <!-- Seashells --> <g transform="translate(500 520)"> <path d="M0 0 Q10 -20 20 0 Q10 10 0 0" fill="#FFB6C1" /> <path d="M30 5 Q40 -15 50 5 Q40 15 30 5" fill="white" /> <path d="M60 0 Q70 -20 80 0 Q70 10 60 0" fill="#E6E6FA" /> </g> <!-- Sailboat --> <g transform="translate(400 350)"> <path d="M0 50 L50 0 L0 -50 Z" fill="#FF4500" /> <path d="M0 50 Q-30 40 -50 60 L0 50" fill="#8B4513" /> <animateMotion path="M0 0 Q100 -50 200 0 Q300 50 400 0" dur="20s" repeatCount="indefinite" /> </g> </svg>';
        string memory actualURI = deployer.svgToImageURI(svg);
        assert(
            keccak256(abi.encodePacked(expectedURI)) ==
                keccak256(abi.encodePacked(actualURI))
        );
    }
}
